<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi-AI Platform</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.animate-bounce-1{animation:bounce 1s infinite 0ms}
.animate-bounce-2{animation:bounce 1s infinite 150ms}
.animate-bounce-3{animation:bounce 1s infinite 300ms}

/* Markdown Styling */
.markdown-content h1{font-size:1.875rem;font-weight:bold;margin-top:1.5rem;margin-bottom:1rem}
.markdown-content h2{font-size:1.5rem;font-weight:bold;margin-top:1.25rem;margin-bottom:0.75rem}
.markdown-content h3{font-size:1.25rem;font-weight:bold;margin-top:1rem;margin-bottom:0.5rem}
.markdown-content p{margin-bottom:1rem;word-wrap:break-word;overflow-wrap:break-word}
.markdown-content strong{font-weight:bold}
.markdown-content em{font-style:italic}
.markdown-content code{
  background:rgba(0,0,0,0.3);
  padding:0.125rem 0.375rem;
  border-radius:0.25rem;
  font-family:'Courier New',monospace;
  font-size:0.875rem;
  word-wrap:break-word;
  overflow-wrap:break-word;
}
.markdown-content pre{
  background:rgba(0,0,0,0.4);
  padding:1rem;
  border-radius:0.5rem;
  overflow-x:auto;
  margin-bottom:1rem;
  max-width:100%;
  position:relative;
}
.markdown-content pre code{
  background:transparent;
  padding:0;
  font-size:0.875rem;
  display:block;
  white-space:pre;
  word-wrap:normal;
  overflow-wrap:normal;
}
.markdown-content ul{list-style:disc;margin-left:1.5rem;margin-bottom:1rem}
.markdown-content ol{list-style:decimal;margin-left:1.5rem;margin-bottom:1rem}
.markdown-content li{margin-bottom:0.5rem;word-wrap:break-word}
.markdown-content a{color:#60a5fa;text-decoration:underline;word-break:break-all}
.markdown-content blockquote{
  border-left:4px solid rgba(255,255,255,0.3);
  padding-left:1rem;
  margin:1rem 0;
  font-style:italic;
}

/* Custom Scrollbar */
.custom-scrollbar::-webkit-scrollbar{width:8px;height:8px}
.custom-scrollbar::-webkit-scrollbar-track{background:rgba(0,0,0,0.2)}
.custom-scrollbar::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.2);border-radius:4px}
.custom-scrollbar::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.3)}

/* Mobile Responsive */
@media (max-width: 768px) {
  .mobile-hide{display:none}
  .mobile-full{width:100%}
  .mobile-text-sm{font-size:0.875rem}
  .mobile-p-2{padding:0.5rem}
  .mobile-gap-2{gap:0.5rem}
}

/* Message Wrapping */
.message-content{
  word-wrap:break-word;
  overflow-wrap:break-word;
  word-break:break-word;
  max-width:100%;
}

/* Copy Button for Code */
.code-block-wrapper{position:relative}
.copy-code-btn{
  position:absolute;
  top:0.5rem;
  right:0.5rem;
  background:rgba(59,130,246,0.8);
  color:white;
  padding:0.25rem 0.5rem;
  border-radius:0.25rem;
  font-size:0.75rem;
  cursor:pointer;
  opacity:0;
  transition:opacity 0.2s;
}
.code-block-wrapper:hover .copy-code-btn{opacity:1}
.copy-code-btn:hover{background:rgba(59,130,246,1)}

/* Bias Rating Styles */
.bias-badge{
  display:inline-block;
  padding:0.25rem 0.75rem;
  border-radius:9999px;
  font-size:0.75rem;
  font-weight:600;
}
.bias-high{background:#ef4444;color:white}
.bias-medium{background:#f59e0b;color:white}
.bias-low{background:#10b981;color:white}

/* Compare Mode Column */
.compare-column{
  border:2px solid transparent;
  transition:border-color 0.2s;
}
.compare-column.active{
  border-color:#3b82f6;
  box-shadow:0 0 20px rgba(59,130,246,0.3);
}

/* Touch Friendly (Mobile) */
@media (max-width: 768px) {
  button{min-height:44px;min-width:44px}
  input{min-height:44px}
  .sidebar-mobile{
    position:fixed;
    z-index:50;
    height:100vh;
    left:0;
    top:0;
  }
  .overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.5);
    z-index:40;
  }
}

/* Glassmorphism Styles */
.glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
}

.glass-dark {
  background: rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
}

.glass-card {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
}

.glass-input {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.glass-button {
  background: rgba(59, 130, 246, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

.glass-button:hover {
  background: rgba(59, 130, 246, 0.5);
  box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);
}

/* Animated gradient background */
body {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);
  background-size: 400% 400%;
  animation: gradientShift 20s ease infinite;
  min-height: 100vh;
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Ensure text is readable on gradient */
.text-white, .text-gray-200, .text-gray-300, .text-gray-400 {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}
</style>
</head>
<body>
<div id="app"></div>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="text/babel">
const {useState,useEffect,useRef}=React;
marked.setOptions({breaks:true,gfm:true});

// ‚ö†Ô∏è REPLACE THESE WITH YOUR VALUES
const SUPABASE_URL='https://dagyncvbqirgnydsxahf.supabase.co';
const SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRhZ3luY3ZicWlyZ255ZHN4YWhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzU0MTIsImV4cCI6MjA4MTA1MTQxMn0.SzYiLxkdrtjUEi4g-9FwwdWSpyUewfEqrSbazrNGW1E';
const ADMIN_EMAIL='jasimd931@gmail.com';
const INVITE_CODE='FAMILY2024';

const supabase=window.supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);

const models=[
{id:'gemini-pro',name:'Gemini 2.5 Pro',provider:'google',endpoint:'gemini-2.0-flash-exp',color:'#4285f4'},
{id:'cerebras',name:'Cerebras Llama',provider:'cerebras',endpoint:'llama3.3-70b',color:'#8b5cf6'},
{id:'groq',name:'Groq Llama',provider:'groq',endpoint:'llama-3.3-70b-versatile',color:'#ec4899'},
{id:'deepseek',name:'DeepSeek V3',provider:'deepseek',endpoint:'deepseek-chat',color:'#10b981'}
];

// Helper function to copy code to clipboard
const copyToClipboard=(text)=>{
  navigator.clipboard.writeText(text).then(()=>{
    alert('Code copied!');
  }).catch(()=>{
    alert('Failed to copy');
  });
};

// Enhanced markdown renderer with copy buttons
const renderMarkdown=(content)=>{
  let html=marked.parse(content);
  html=html.replace(/<pre><code>([\s\S]*?)<\/code><\/pre>/g,(match,code)=>{
    const decodedCode=code.replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');
    return `<div class="code-block-wrapper"><button class="copy-code-btn" onclick="copyToClipboard(\`${decodedCode.replace(/`/g,'\\`')}\`)">Copy</button><pre><code>${code}</code></pre></div>`;
  });
  return html;
};

// Make copyToClipboard globally available
window.copyToClipboard=copyToClipboard;
const SendIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>;
const UserIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="7" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></svg>;
const SettingsIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6"/></svg>;
const LogOutIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>;
const TrashIcon=()=><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>;
const PlusIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>;
const MessageIcon=()=><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>;
const EditIcon=()=><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>;
const ShieldIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>;
const ImageIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>;
const PaperclipIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></svg>;
const SparklesIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 3v18m9-9H3m15.364-6.364L5.636 17.636m12.728 0L5.636 6.364"/></svg>;
const ColumnsIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/></svg>;
const AnalyzeIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>;
const MenuIcon=()=><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>;
const CloseIcon=()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>;
function App(){
const [session,setSession]=useState(null);
const [view,setView]=useState('chat');
const [email,setEmail]=useState('');
const [password,setPassword]=useState('');
const [inviteCode,setInviteCode]=useState('');
const [isSignup,setIsSignup]=useState(false);
const [chats,setChats]=useState([]);
const [currentChatId,setCurrentChatId]=useState(null);
const [input,setInput]=useState('');
const [loading,setLoading]=useState(false);
const [apiKeys,setApiKeys]=useState({});
const [showSettings,setShowSettings]=useState(false);
const [showSidebar,setShowSidebar]=useState(true);
const [editingChatId,setEditingChatId]=useState(null);
const [editingName,setEditingName]=useState('');
const [isAdmin,setIsAdmin]=useState(false);
const [attachedFile,setAttachedFile]=useState(null);
const [imagePrompt,setImagePrompt]=useState('');
const [generatedImage,setGeneratedImage]=useState(null);

// NEW: Compare mode states
const [compareMode,setCompareMode]=useState(false);
const [selectedModels,setSelectedModels]=useState([]);
const [compareResponses,setCompareResponses]=useState({});
const [focusedModel,setFocusedModel]=useState(null);
const [biasAnalysis,setBiasAnalysis]=useState(null);
const [analyzingBias,setAnalyzingBias]=useState(false);

const messagesEndRef=useRef(null);
const fileInputRef=useRef(null);

const currentChat=chats.find(c=>c.id===currentChatId);

useEffect(()=>{
supabase.auth.getSession().then(({data:{session}})=>{
setSession(session);
if(session){
setIsAdmin(session.user.email===ADMIN_EMAIL);
loadUserData(session.user.id);
}
});
supabase.auth.onAuthStateChange((_event,session)=>{
setSession(session);
if(session){
setIsAdmin(session.user.email===ADMIN_EMAIL);
loadUserData(session.user.id);
}
});
},[]);

useEffect(()=>{
messagesEndRef.current?.scrollIntoView({behavior:'smooth'});
},[currentChat?.messages,compareResponses]);

// Load compare mode settings from chat
useEffect(()=>{
if(currentChat){
setCompareMode(currentChat.compare_mode||false);
setSelectedModels(currentChat.selected_models||[]);
setCompareResponses(currentChat.compare_responses||{});
setFocusedModel(currentChat.focused_model||null);
}
},[currentChatId]);
const loadUserData=async(userId)=>{
const {data:chatsData}=await supabase.from('chats').select('*').eq('user_id',userId).order('created_at',{ascending:false});
if(chatsData?.length>0){
setChats(chatsData);
setCurrentChatId(chatsData[0].id);
}else{
createNewChat(userId);
}
const {data:keysData}=await supabase.from('api_keys').select('*').eq('user_id',userId);
const keysObj={};
keysData?.forEach(k=>{keysObj[k.provider]=k.key_value;});
setApiKeys(keysObj);
};

const createNewChat=async(userId)=>{
const {data}=await supabase.from('chats').insert([{
user_id:userId||session.user.id,
name:'New Chat',
model:'cerebras',
messages:[],
compare_mode:false,
selected_models:[],
compare_responses:{},
focused_model:null
}]).select().single();
if(data){
setChats([data,...chats]);
setCurrentChatId(data.id);
}
};

const deleteChat=async(chatId)=>{
if(chats.length===1){alert("Can't delete last chat!");return;}
if(!confirm('Delete this chat?'))return;
await supabase.from('chats').delete().eq('id',chatId);
const newChats=chats.filter(c=>c.id!==chatId);
setChats(newChats);
if(currentChatId===chatId)setCurrentChatId(newChats[0]?.id);
};

const renameChat=async(chatId,newName)=>{
await supabase.from('chats').update({name:newName}).eq('id',chatId);
setChats(chats.map(c=>c.id===chatId?{...c,name:newName}:c));
setEditingChatId(null);
};

const updateChatModel=async(modelId)=>{
await supabase.from('chats').update({model:modelId}).eq('id',currentChatId);
setChats(chats.map(c=>c.id===currentChatId?{...c,model:modelId}:c));
};

const toggleCompareMode=async()=>{
const newCompareMode=!compareMode;
setCompareMode(newCompareMode);
if(newCompareMode){
setSelectedModels(['cerebras','groq']);
}else{
setSelectedModels([]);
setCompareResponses({});
setFocusedModel(null);
}
await supabase.from('chats').update({
compare_mode:newCompareMode,
selected_models:newCompareMode?['cerebras','groq']:[],
compare_responses:{},
focused_model:null
}).eq('id',currentChatId);
setChats(chats.map(c=>c.id===currentChatId?{
...c,
compare_mode:newCompareMode,
selected_models:newCompareMode?['cerebras','groq']:[],
compare_responses:{},
focused_model:null
}:c));
};

const toggleModelSelection=(modelId)=>{
const newSelected=selectedModels.includes(modelId)?
selectedModels.filter(id=>id!==modelId):
[...selectedModels,modelId];
setSelectedModels(newSelected);
};

const handleAuth=async()=>{
try{
if(isSignup){
if(inviteCode!==INVITE_CODE){
alert('Invalid invite code!');
return;
}
const {error}=await supabase.auth.signUp({email,password});
if(error)throw error;
alert('Account created! Please log in.');
setIsSignup(false);
}else{
const {error}=await supabase.auth.signInWithPassword({email,password});
if(error)throw error;
}
}catch(error){
alert(error.message);
}
};

const handleFileSelect=async(e)=>{
const file=e.target.files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=async(event)=>{
setAttachedFile({
name:file.name,
type:file.type,
data:event.target.result.split(',')[1]
});
};
reader.readAsDataURL(file);
};

const enhancePrompt=async()=>{
if(!input.trim())return;
const enhancerKey=apiKeys.cerebras||apiKeys.groq;
if(!enhancerKey){
alert('Need an API key to enhance prompts');
return;
}
setLoading(true);
try{
const res=await fetch('https://api.cerebras.ai/v1/chat/completions',{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':`Bearer ${enhancerKey}`},
body:JSON.stringify({
model:'llama3.3-70b',
messages:[{role:'user',content:`Improve this prompt to be more detailed and effective (ONLY SHOW THE PROMPT AND NOTHING ELSE!!!): "${input}"`}],
max_tokens:500
})
});
const data=await res.json();
setInput(data.choices[0].message.content);
}catch(error){
alert('Error enhancing prompt');
}finally{
setLoading(false);
}
};
const sendMessage=async()=>{
if(!input.trim()||!currentChat)return;

if(compareMode&&selectedModels.length>0){
await sendCompareMessage();
return;
}

const model=models.find(m=>m.id===(compareMode&&focusedModel?focusedModel:currentChat.model));
const apiKey=apiKeys[model.provider];
if(!apiKey){
alert(`Please add ${model.provider} API key in settings`);
setShowSettings(true);
return;
}

const userMsg={role:'user',content:input,file:attachedFile,timestamp:new Date().toISOString()};
const newMsgs=[...(currentChat.messages||[]),userMsg];
setChats(chats.map(c=>c.id===currentChatId?{...c,messages:newMsgs}:c));

if((!currentChat.messages||currentChat.messages.length===0)&&currentChat.name==='New Chat'){
const chatName=input.slice(0,30)+(input.length>30?'...':'');
await supabase.from('chats').update({name:chatName}).eq('id',currentChatId);
setChats(chats.map(c=>c.id===currentChatId?{...c,name:chatName}:c));
}

setInput('');
setAttachedFile(null);
setLoading(true);

try{
const history=newMsgs.map(m=>({role:m.role==='assistant'?'assistant':'user',content:m.content}));
let response;

if(model.provider==='google'){
const contents=history.map((msg,idx)=>{
const parts=[{text:msg.content}];
if(idx===history.length-1&&attachedFile){
parts.push({inline_data:{mime_type:attachedFile.type,data:attachedFile.data}});
}
return {role:msg.role==='user'?'user':'model',parts};
});
const res=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model.endpoint}:generateContent?key=${apiKey}`,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({contents})
});
const data=await res.json();
response=data.candidates[0].content.parts[0].text;
}else if(model.provider==='cerebras'){
const res=await fetch('https://api.cerebras.ai/v1/chat/completions',{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':`Bearer ${apiKey}`},
body:JSON.stringify({model:model.endpoint,messages:history,max_tokens:4096})
});
const data=await res.json();
response=data.choices[0].message.content;
}else if(model.provider==='groq'){
const res=await fetch('https://api.groq.com/openai/v1/chat/completions',{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':`Bearer ${apiKey}`},
body:JSON.stringify({model:model.endpoint,messages:history,max_tokens:4096})
});
const data=await res.json();
response=data.choices[0].message.content;
}else if(model.provider==='deepseek'){
const res=await fetch('https://api.deepseek.com/chat/completions',{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':`Bearer ${apiKey}`},
body:JSON.stringify({model:model.endpoint,messages:history,max_tokens:4096})
});
const data=await res.json();
response=data.choices[0].message.content;
}

const assistantMsg={role:'assistant',content:response,timestamp:new Date().toISOString()};
const updatedMsgs=[...newMsgs,assistantMsg];
await supabase.from('chats').update({messages:updatedMsgs}).eq('id',currentChatId);
setChats(chats.map(c=>c.id===currentChatId?{...c,messages:updatedMsgs}:c));
}catch(error){
alert('Error: '+error.message);
}finally{
setLoading(false);
}
};

const sendCompareMessage=async()=>{
if(!input.trim()||selectedModels.length===0)return;

const userPrompt=input;
setInput('');
setLoading(true);
setBiasAnalysis(null);

const newResponses={};
const promises=selectedModels.map(async(modelId)=>{
const model=models.find(m=>m.id===modelId);
const apiKey=apiKeys[model.provider];
if(!apiKey)return;

try{
const history=(compareResponses[modelId]||[]).concat([{role:'user',content:userPrompt}]);
let response;

if(model.provider==='google'){
const contents=history.map(msg=>({
role:msg.role==='user'?'user':'model',
parts:[{text:msg.content}]
}));
const res=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${model.endpoint}:generateContent?key=${apiKey}`,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({contents})
});
const data=await res.json();
response=data.candidates[0].content.parts[0].text;
}else{
const endpoint=model.provider==='cerebras'?'https://api.cerebras.ai/v1/chat/completions':
model.provider==='groq'?'https://api.groq.com/openai/v1/chat/completions':
'https://api.deepseek.com/chat/completions';
const res=await fetch(endpoint,{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':`Bearer ${apiKey}`},
body:JSON.stringify({model:model.endpoint,messages:history,max_tokens:4096})
});
const data=await res.json();
response=data.choices[0].message.content;
}

newResponses[modelId]=[...history,{role:'assistant',content:response}];
}catch(error){
newResponses[modelId]=[...history,{role:'assistant',content:'Error: '+error.message}];
}
});

await Promise.all(promises);

const updatedCompareResponses={...compareResponses,...newResponses};
setCompareResponses(updatedCompareResponses);

await supabase.from('chats').update({
compare_responses:updatedCompareResponses
}).eq('id',currentChatId);

setChats(chats.map(c=>c.id===currentChatId?{
...c,
compare_responses:updatedCompareResponses
}:c));

setLoading(false);
};

const focusOnModel=async(modelId)=>{
setFocusedModel(modelId);
await supabase.from('chats').update({focused_model:modelId}).eq('id',currentChatId);
setChats(chats.map(c=>c.id===currentChatId?{...c,focused_model:modelId}:c));
};
const analyzeBias=async()=>{
if(Object.keys(compareResponses).length===0)return;

setAnalyzingBias(true);
const analyzerKey=apiKeys.cerebras||apiKeys.groq;
if(!analyzerKey){
alert('Need Cerebras or Groq API key for bias analysis');
setAnalyzingBias(false);
return;
}

try{
const responsesText=selectedModels.map(modelId=>{
const model=models.find(m=>m.id===modelId);
const history=compareResponses[modelId]||[];
const lastResponse=history[history.length-1];
return `**${model.name}**: ${lastResponse?.content||'No response'}`;
}).join('\n\n');

const analysisPrompt=`You are an AI bias analyst. Analyze these AI responses and provide ratings for each:

${responsesText}

Provide analysis in this exact JSON format (no markdown, no backticks):
{
  "models": [
    {
      "name": "Model Name",
      "bias": 7,
      "credibility": 8,
      "completeness": 9,
      "clarity": 8,
      "summary": "Brief analysis"
    }
  ],
  "recommendation": "Which model gave the best response and why"
}

Rate each metric 1-10 where:
- Bias: 1=highly biased, 10=completely neutral
- Credibility: 1=unreliable, 10=highly credible
- Completeness: 1=incomplete, 10=comprehensive
- Clarity: 1=confusing, 10=crystal clear`;

const res=await fetch('https://api.cerebras.ai/v1/chat/completions',{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':`Bearer ${analyzerKey}`},
body:JSON.stringify({
model:'llama3.3-70b',
messages:[{role:'user',content:analysisPrompt}],
max_tokens:2000
})
});

const data=await res.json();
const analysisText=data.choices[0].message.content;
const cleanedText=analysisText.replace(/```json|```/g,'').trim();
const analysis=JSON.parse(cleanedText);
setBiasAnalysis(analysis);
}catch(error){
alert('Error analyzing bias: '+error.message);
console.error(error);
}finally{
setAnalyzingBias(false);
}
};

const generateImage=async()=>{
if(!imagePrompt.trim())return;
setLoading(true);
try{
const url=`https://image.pollinations.ai/prompt/${encodeURIComponent(imagePrompt)}?width=1024&height=1024&nologo=true`;
setGeneratedImage(url);
}catch(error){
alert('Error generating image');
}finally{
setLoading(false);
}
};
if(!session){
return(
<div className="flex items-center justify-center min-h-screen p-4">
<div className="glass-card p-6 md:p-8 rounded-2xl w-full max-w-md">
<div className="text-center mb-8">
<div className="w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mx-auto mb-4 flex items-center justify-center">
<UserIcon/>
</div>
<h1 className="text-2xl md:text-3xl font-bold text-white mb-2">Multi-AI Platform</h1>
<p className="text-gray-400 text-sm md:text-base">Your personal AI suite</p>
</div>
<div className="space-y-4">
<input type="email" value={email} onChange={(e)=>setEmail(e.target.value)} placeholder="Email"
className="w-full glass-input text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base"/>
<input type="password" value={password} onChange={(e)=>setPassword(e.target.value)} placeholder="Password"
onKeyPress={(e)=>e.key==='Enter'&&handleAuth()}
className="w-full glass-input text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base"/>
{isSignup&&(
<input type="text" value={inviteCode} onChange={(e)=>setInviteCode(e.target.value)} placeholder="Invite Code"
className="w-full glass-input text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base"/>
)}
<button onClick={handleAuth} className="w-full glass-button hover:bg-blue-700 text-white py-3 rounded-lg font-semibold text-base">
{isSignup?'Sign Up':'Login'}
</button>
<button onClick={()=>setIsSignup(!isSignup)} className="w-full text-blue-400 hover:text-blue-300 text-sm">
{isSignup?'Have an account? Login':'Need an account? Sign up'}
</button>
</div>
</div>
</div>
);
}

if(showSettings){
return <SettingsScreen apiKeys={apiKeys} setApiKeys={setApiKeys} setShowSettings={setShowSettings} session={session}/>;
}

if(view==='image'){
return <ImageGenView imagePrompt={imagePrompt} setImagePrompt={setImagePrompt} generateImage={generateImage}
generatedImage={generatedImage} loading={loading} setView={setView}/>;
}
return(
<div className="flex h-screen text-white overflow-hidden">
{/* Mobile Overlay */}
{showSidebar&&(
<div className="md:hidden fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-40" onClick={()=>setShowSidebar(false)}/>
)}

{/* Sidebar */}
<div className={`${showSidebar?'translate-x-0':'translate-x-[-100%]'} md:translate-x-0 fixed md:relative z-50 md:z-auto w-64 glass-dark border-r border-white border-opacity-20 flex flex-col transition-transform h-full`}>
<div className="p-3 md:p-4 border-b border-white border-opacity-20 space-y-2">
<button onClick={()=>{createNewChat();setShowSidebar(false);}} 
className="w-full glass-button hover:bg-blue-700 px-3 py-2 rounded-lg flex items-center justify-center gap-2 text-sm md:text-base">
<PlusIcon/>New Chat
</button>
<button onClick={()=>setView('image')} 
className="w-full glass-button hover:bg-pink-700 px-3 py-2 rounded-lg flex items-center justify-center gap-2 text-sm" style={{background: 'rgba(236, 72, 153, 0.3)'}}>
<ImageIcon/>Generate Image
</button>
</div>

<div className="flex-1 overflow-y-auto custom-scrollbar p-2">
{chats.map(chat=>(
<div key={chat.id} 
className={`p-2 md:p-3 mb-2 rounded-lg cursor-pointer group glass-card ${currentChatId===chat.id?'bg-opacity-30':'hover:bg-opacity-20'}`}
onClick={()=>{setCurrentChatId(chat.id);setShowSidebar(false);}}>
<div className="flex items-center justify-between">
{editingChatId===chat.id?(
<input type="text" value={editingName} onChange={(e)=>setEditingName(e.target.value)}
onBlur={()=>renameChat(chat.id,editingName)}
onKeyPress={(e)=>e.key==='Enter'&&renameChat(chat.id,editingName)}
className="bg-gray-600 px-2 py-1 rounded text-sm flex-1 text-white" autoFocus
onClick={(e)=>e.stopPropagation()}/>
):(
<>
<div className="flex items-center gap-2 flex-1 min-w-0">
<MessageIcon/><span className="text-xs md:text-sm truncate">{chat.name}</span>
</div>
<div className="flex gap-1 opacity-0 group-hover:opacity-100">
<button onClick={(e)=>{e.stopPropagation();setEditingChatId(chat.id);setEditingName(chat.name);}}
className="p-1 hover:bg-gray-600 rounded"><EditIcon/></button>
<button onClick={(e)=>{e.stopPropagation();deleteChat(chat.id);}}
className="p-1 hover:bg-gray-600 rounded"><TrashIcon/></button>
</div>
</>
)}
</div>
<div className="text-xs text-gray-400 mt-1">{models.find(m=>m.id===chat.model)?.name}</div>
{chat.compare_mode&&<div className="text-xs text-purple-400 mt-1">üîÑ Compare Mode</div>}
</div>
))}
</div>

<div className="p-3 md:p-4 border-t border-white border-opacity-20">
<div className="flex items-center gap-2 md:gap-3 mb-3">
<div className="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0 glass">
{isAdmin?<ShieldIcon/>:<UserIcon/>}
</div>
<div className="flex-1 min-w-0">
<span className="text-xs md:text-sm font-semibold block truncate">{session.user.email}</span>
{isAdmin&&<span className="text-xs text-yellow-400">Admin</span>}
</div>
</div>
<div className="flex gap-2">
<button onClick={()=>setShowSettings(true)} className="flex-1 p-2 glass-card hover:bg-opacity-30 rounded-lg">
<SettingsIcon/>
</button>
<button onClick={()=>supabase.auth.signOut()} className="p-2 glass-card hover:bg-opacity-30 rounded-lg">
<LogOutIcon/>
</button>
</div>
</div>
</div>
{/* Main Chat Area */}
<div className="flex-1 flex flex-col min-w-0">
<div className="glass-dark border-b border-white border-opacity-20 p-3 md:p-4 flex items-center gap-2 flex-wrap">
<button onClick={()=>setShowSidebar(!showSidebar)} className="md:hidden p-2 glass-card hover:bg-opacity-30 rounded-lg">
<MenuIcon/>
</button>
<button onClick={()=>setShowSidebar(!showSidebar)} className="hidden md:block p-2 glass-card hover:bg-opacity-30 rounded-lg">‚ò∞</button>
<div className="flex-1 min-w-0">
<div className="font-semibold text-sm md:text-base truncate">{currentChat?.name||'Chat'}</div>
</div>

{/* Compare Mode Toggle */}
{currentChat&&(
<button onClick={toggleCompareMode}
className={`px-3 py-1.5 rounded-lg text-xs md:text-sm font-semibold flex items-center gap-1 glass-card ${
compareMode?'bg-opacity-40':'hover:bg-opacity-30'
}`}>
<ColumnsIcon/>
{compareMode?'Compare ON':'Compare OFF'}
</button>
)}

{/* Model Selector (only in normal mode) */}
{currentChat&&!compareMode&&(
<select value={currentChat.model} onChange={(e)=>updateChatModel(e.target.value)}
className="glass-input text-white px-2 md:px-3 py-1.5 md:py-2 rounded-lg text-xs md:text-sm border border-white border-opacity-20">
{models.map(m=><option key={m.id} value={m.id}>{m.name}</option>)}
</select>
)}
</div>
{/* Compare Mode Model Selection */}
{compareMode&&currentChat&&(
<div className="glass-dark border-b border-white border-opacity-20 p-2 md:p-3">
<div className="flex flex-wrap gap-2 items-center">
<span className="text-xs md:text-sm text-gray-300">Select Models:</span>
{models.map(m=>(
<label key={m.id} className="flex items-center gap-1 cursor-pointer glass-card px-2 md:px-3 py-1 md:py-1.5 rounded-lg hover:bg-opacity-30 text-xs md:text-sm">
<input type="checkbox" checked={selectedModels.includes(m.id)}
onChange={()=>toggleModelSelection(m.id)}
className="w-3 h-3 md:w-4 md:h-4"/>
<span>{m.name}</span>
</label>
))}
{Object.keys(compareResponses).length>0&&(
<button onClick={analyzeBias} disabled={analyzingBias}
className="ml-auto px-3 py-1.5 glass-button hover:bg-yellow-700 rounded-lg flex items-center gap-1 text-xs md:text-sm disabled:opacity-50" style={{background: 'rgba(234, 179, 8, 0.3)'}}>
<AnalyzeIcon/>
{analyzingBias?'Analyzing...':'Analyze Bias'}
</button>
)}
</div>
</div>
)}

{/* Bias Analysis Results */}
{biasAnalysis&&compareMode&&(
<div className="glass-dark border-b border-white border-opacity-20 p-3 md:p-4 relative">
<button onClick={()=>setBiasAnalysis(null)} className="absolute top-3 right-3 p-2 glass-card hover:bg-opacity-40 rounded-full transition-all text-white hover:text-red-300 z-10">
<CloseIcon/>
</button>
<h3 className="font-bold text-sm md:text-base mb-3 text-yellow-400">üìä Bias Analysis</h3>
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-3">
{biasAnalysis.models.map((analysis,idx)=>(
<div key={idx} className="glass-card p-3 rounded-lg text-xs md:text-sm">
<h4 className="font-bold mb-2">{analysis.name}</h4>
<div className="space-y-1">
<div className="flex justify-between">
<span>Bias:</span>
<span className={`bias-badge ${analysis.bias>=7?'bias-low':analysis.bias>=4?'bias-medium':'bias-high'}`}>
{analysis.bias}/10
</span>
</div>
<div className="flex justify-between">
<span>Credibility:</span>
<span className={`bias-badge ${analysis.credibility>=7?'bias-low':analysis.credibility>=4?'bias-medium':'bias-high'}`}>
{analysis.credibility}/10
</span>
</div>
<div className="flex justify-between">
<span>Completeness:</span>
<span className={`bias-badge ${analysis.completeness>=7?'bias-low':analysis.completeness>=4?'bias-medium':'bias-high'}`}>
{analysis.completeness}/10
</span>
</div>
<div className="flex justify-between">
<span>Clarity:</span>
<span className={`bias-badge ${analysis.clarity>=7?'bias-low':analysis.clarity>=4?'bias-medium':'bias-high'}`}>
{analysis.clarity}/10
</span>
</div>
</div>
<p className="mt-2 text-xs text-gray-300">{analysis.summary}</p>
</div>
))}
</div>
<div className="glass-card p-3 rounded-lg" style={{background: 'rgba(59, 130, 246, 0.2)'}}>
<p className="text-xs md:text-sm"><strong>Recommendation:</strong> {biasAnalysis.recommendation}</p>
</div>
</div>
)}
{/* Messages Area */}
<div className="flex-1 overflow-y-auto p-3 md:p-4 custom-scrollbar">
{currentChat&&(!currentChat.messages||currentChat.messages.length===0)&&!compareMode&&Object.keys(compareResponses).length===0&&(
<div className="text-center text-gray-500 mt-10 md:mt-20">
<div className="text-4xl md:text-6xl mb-4">üëã</div>
<div className="text-lg md:text-xl">Start a conversation</div>
<div className="text-xs md:text-sm mt-2">Using {models.find(m=>m.id===currentChat.model)?.name}</div>
</div>
)}

{/* Normal Mode Messages */}
{!compareMode&&currentChat?.messages?.map((msg,idx)=>(
<div key={idx} className={`flex mb-4 ${msg.role==='user'?'justify-end':'justify-start'}`}>
<div className={`max-w-[85%] md:max-w-[80%] rounded-2xl p-3 md:p-4 glass-card message-content ${msg.role==='user'?'bg-opacity-40':''}`} style={msg.role==='user'?{background: 'rgba(59, 130, 246, 0.3)'}:{}}>
{msg.file&&<div className="text-xs mb-2 opacity-75">üìé {msg.file.name}</div>}
{msg.role==='user'?(
<div className="whitespace-pre-wrap break-words">{msg.content}</div>
):(
<div className="markdown-content" dangerouslySetInnerHTML={{__html:renderMarkdown(msg.content)}}/>
)}
</div>
</div>
))}

{/* Compare Mode Messages */}
{compareMode&&Object.keys(compareResponses).length>0&&(
<div className="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4">
{selectedModels.map(modelId=>{
const model=models.find(m=>m.id===modelId);
const history=compareResponses[modelId]||[];
return(
<div key={modelId} 
className={`compare-column glass-card rounded-lg p-3 md:p-4 ${focusedModel===modelId?'active':''}`}
onClick={()=>focusOnModel(modelId)}>
<div className="flex items-center justify-between mb-3 sticky top-0 glass-dark pb-2 border-b border-white border-opacity-20">
<h3 className="font-bold text-sm md:text-base flex items-center gap-2">
<div className="w-3 h-3 rounded-full" style={{backgroundColor:model.color}}/>
{model.name}
</h3>
{focusedModel===modelId&&(
<span className="text-xs bg-blue-600 px-2 py-1 rounded">Active</span>
)}
</div>
<div className="space-y-3 max-h-96 overflow-y-auto custom-scrollbar">
{history.map((msg,idx)=>(
<div key={idx} className={`${msg.role==='user'?'text-blue-300':'text-white'} text-xs md:text-sm`}>
<div className="font-semibold mb-1">{msg.role==='user'?'You':'AI'}:</div>
{msg.role==='user'?(
<div className="whitespace-pre-wrap break-words">{msg.content}</div>
):(
<div className="markdown-content" dangerouslySetInnerHTML={{__html:renderMarkdown(msg.content)}}/>
)}
</div>
))}
</div>
</div>
);
})}
</div>
)}

{loading&&(
<div className="flex justify-start mb-4">
<div className="glass-card rounded-2xl p-3 md:p-4">
<div className="flex gap-2">
<div className="w-2 h-2 bg-white rounded-full animate-bounce-1 opacity-60"/>
<div className="w-2 h-2 bg-white rounded-full animate-bounce-2 opacity-60"/>
<div className="w-2 h-2 bg-white rounded-full animate-bounce-3 opacity-60"/>
</div>
</div>
</div>
)}
<div ref={messagesEndRef}/>
</div>
{/* Input Area */}
<div className="glass-dark border-t border-white border-opacity-20 p-2 md:p-4">
{attachedFile&&(
<div className="mb-2 flex items-center gap-2 glass-card p-2 rounded text-xs md:text-sm">
<span className="truncate">üìé {attachedFile.name}</span>
<button onClick={()=>setAttachedFile(null)} className="text-red-400 hover:text-red-300 ml-auto">√ó</button>
</div>
)}
{focusedModel&&compareMode&&(
<div className="mb-2 glass-card p-2 rounded text-xs md:text-sm" style={{background: 'rgba(59, 130, 246, 0.2)'}}>
Talking to: <strong>{models.find(m=>m.id===focusedModel)?.name}</strong>
<button onClick={()=>focusOnModel(null)} className="ml-2 text-blue-400">Send to all</button>
</div>
)}
<div className="flex gap-1 md:gap-2">
<input type="file" ref={fileInputRef} onChange={handleFileSelect} accept="image/*,application/pdf,.txt" className="hidden"/>
<button onClick={()=>fileInputRef.current?.click()} disabled={loading}
className="p-2 md:p-3 glass-card hover:bg-opacity-30 rounded-lg disabled:opacity-50" title="Attach file">
<PaperclipIcon/>
</button>
<button onClick={enhancePrompt} disabled={loading||!input.trim()}
className="p-2 md:p-3 glass-button hover:bg-purple-700 rounded-lg disabled:opacity-50" title="Enhance prompt" style={{background: 'rgba(147, 51, 234, 0.3)'}}>
<SparklesIcon/>
</button>
<input type="text" value={input} onChange={(e)=>setInput(e.target.value)}
onKeyPress={(e)=>e.key==='Enter'&&!e.shiftKey&&sendMessage()}
placeholder={compareMode?"Ask all selected AIs...":"Type a message..."}
disabled={loading}
className="flex-1 glass-input text-white px-3 md:px-4 py-2 md:py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"/>
<button onClick={sendMessage} disabled={loading||!input.trim()}
className="px-4 md:px-6 glass-button hover:bg-blue-700 rounded-lg disabled:opacity-50">
<SendIcon/>
</button>
</div>
</div>
</div>
</div>
);
}
function ImageGenView({imagePrompt,setImagePrompt,generateImage,generatedImage,loading,setView}){
return(
<div className="min-h-screen text-white p-4 md:p-8">
<div className="max-w-4xl mx-auto">
<button onClick={()=>setView('chat')} className="text-blue-300 hover:text-blue-200 mb-4 text-sm md:text-base glass-card px-3 py-2 rounded-lg">
‚Üê Back to Chat
</button>
<h1 className="text-2xl md:text-3xl font-bold mb-4 md:mb-6">Generate Images</h1>
<p className="text-gray-200 mb-4 md:mb-6 text-sm md:text-base">Powered by Pollinations.ai - 100% free!</p>
<div className="mb-4 md:mb-6 flex gap-2">
<input type="text" value={imagePrompt} onChange={(e)=>setImagePrompt(e.target.value)}
onKeyPress={(e)=>e.key==='Enter'&&generateImage()}
placeholder="Describe the image..."
className="flex-1 glass-input text-white px-3 md:px-4 py-2 md:py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"/>
<button onClick={generateImage} disabled={loading||!imagePrompt.trim()}
className="px-4 md:px-6 glass-button hover:bg-pink-700 rounded-lg disabled:opacity-50 font-semibold text-sm md:text-base" style={{background: 'rgba(236, 72, 153, 0.3)'}}>
Generate
</button>
</div>
{loading&&(
<div className="text-center py-10 md:py-20">
<div className="text-4xl md:text-6xl mb-4">üé®</div>
<div className="text-lg md:text-xl">Generating...</div>
</div>
)}
{generatedImage&&!loading&&(
<div className="glass-card p-3 md:p-4 rounded-2xl">
<img src={generatedImage} alt="Generated" className="w-full rounded-lg mb-4"/>
<div className="flex flex-col md:flex-row gap-2">
<a href={generatedImage} download="generated-image.png" 
className="flex-1 text-center glass-button hover:bg-blue-700 px-4 py-2 rounded-lg font-semibold text-sm md:text-base">
Download
</a>
<button onClick={()=>setGeneratedImage(null)} 
className="px-4 py-2 glass-card hover:bg-opacity-30 rounded-lg text-sm md:text-base">
Clear
</button>
</div>
</div>
)}
</div>
</div>
);
}
function SettingsScreen({apiKeys,setApiKeys,setShowSettings,session}){
const [google,setGoogle]=useState(apiKeys.google||'');
const [cerebras,setCerebras]=useState(apiKeys.cerebras||'');
const [groq,setGroq]=useState(apiKeys.groq||'');
const [deepseek,setDeepseek]=useState(apiKeys.deepseek||'');

const saveKeys=async()=>{
const keys={google,cerebras,groq,deepseek};
for(const [provider,keyValue] of Object.entries(keys)){
if(!keyValue)continue;
await supabase.from('api_keys').upsert({
user_id:session.user.id,
provider,
key_value:keyValue
},{onConflict:'user_id,provider'});
}
setApiKeys(keys);
alert('API Keys saved!');
setShowSettings(false);
};

return(
<div className="min-h-screen text-white p-4 md:p-8">
<div className="max-w-2xl mx-auto">
<button onClick={()=>setShowSettings(false)} className="text-blue-300 hover:text-blue-200 mb-4 text-sm md:text-base glass-card px-3 py-2 rounded-lg">
‚Üê Back
</button>
<h1 className="text-2xl md:text-3xl font-bold mb-2">Settings</h1>
<p className="text-gray-200 mb-4 md:mb-6 text-sm md:text-base">Configure your API keys</p>

<div className="space-y-4 md:space-y-6 glass-card p-4 md:p-6 rounded-2xl">
<div>
<label className="block text-xs md:text-sm font-semibold mb-2">Google Gemini</label>
<input type="password" value={google} onChange={(e)=>setGoogle(e.target.value)}
className="w-full glass-input text-white px-3 md:px-4 py-2 md:py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"/>
<a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener" 
className="text-xs text-blue-300 hover:text-blue-200 mt-1 inline-block">Get key ‚Üí</a>
</div>

<div>
<label className="block text-xs md:text-sm font-semibold mb-2">Cerebras</label>
<input type="password" value={cerebras} onChange={(e)=>setCerebras(e.target.value)}
className="w-full glass-input text-white px-3 md:px-4 py-2 md:py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"/>
<a href="https://cloud.cerebras.ai/" target="_blank" rel="noopener" 
className="text-xs text-blue-300 hover:text-blue-200 mt-1 inline-block">Get key ‚Üí</a>
</div>

<div>
<label className="block text-xs md:text-sm font-semibold mb-2">Groq</label>
<input type="password" value={groq} onChange={(e)=>setGroq(e.target.value)}
className="w-full glass-input text-white px-3 md:px-4 py-2 md:py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"/>
<a href="https://console.groq.com/keys" target="_blank" rel="noopener" 
className="text-xs text-blue-300 hover:text-blue-200 mt-1 inline-block">Get key ‚Üí</a>
</div>

<div>
<label className="block text-xs md:text-sm font-semibold mb-2">DeepSeek</label>
<input type="password" value={deepseek} onChange={(e)=>setDeepseek(e.target.value)}
className="w-full glass-input text-white px-3 md:px-4 py-2 md:py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm md:text-base"/>
<a href="https://platform.deepseek.com/api_keys" target="_blank" rel="noopener" 
className="text-xs text-blue-300 hover:text-blue-200 mt-1 inline-block">Get key ‚Üí</a>
</div>

<button onClick={saveKeys} 
className="w-full glass-button hover:bg-blue-700 text-white py-2 md:py-3 rounded-lg font-semibold text-sm md:text-base">
Save API Keys
</button>
</div>
</div>
</div>
);
}
ReactDOM.createRoot(document.getElementById('app')).render(<App/>);
</script>
</body>
</html>
